<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>åœè»Šå ´ Parking</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<header>åœè»Šå ´ Parking</header>

<nav>
  <a href="index.html">é¦–é </a>
  <a href="itineraries.html">è¡Œç¨‹</a>
  <a href="destinations.html">ç›®çš„åœ°</a>
  <a href="parking.html" class="active">åœè»Šå ´</a>
  <a href="packing.html">è¡Œææ¸…å–®</a>
</nav>

<div class="container">

  <div class="card">
    <h2>é¸æ“‡åŸå¸‚</h2>
    <select id="citySelect"></select>
    <div id="hint" class="meta" style="margin-top:8px;color:#1976d2;"></div>
  </div>

  <div id="parkingList"></div>

</div>

<script>
/* ======================
   åœè»Šå ´ JSON è³‡æ–™
====================== */
const PARKING_DATA = {
  sapporo: {
    name: "åŒ—æµ·é“ãƒ»æœ­å¹Œ",
    parkings: [
      {
        name: "æœ­å¹Œç«™å‰åœ°ä¸‹åœè»Šå ´",
        tag: "å¸‚å€åœè»Šå ´",
        address: "åŒ—æµ·é“æœ­å¹Œå¸‚ä¸­å¤®å€åŒ—5æ¢è¥¿2ä¸ç›®",
        hours: "24 å°æ™‚",
        price: "300å†† / 30åˆ†é˜",
        capacity: "200 å°",
        map: "æœ­å¹Œé§…"
      },
      {
        name: "å¤§é€šå…¬åœ’åœ°ä¸‹åœè»Šå ´",
        tag: "è§€å…‰æ™¯é»",
        address: "åŒ—æµ·é“æœ­å¹Œå¸‚ä¸­å¤®å€å¤§é€šè¥¿1ä¸ç›®",
        hours: "07:00â€“22:00",
        price: "250å†† / 30åˆ†é˜",
        capacity: "150 å°",
        map: "å¤§é€šå…¬åœ’"
      },
      {
        name: "VESSEL INN æœ­å¹Œä¸­å³¶å…¬åœ’",
        tag: "é£¯åº—é™„è¨­",
        address: "åŒ—æµ·é“æœ­å¹Œå¸‚ä¸­å¤®å€å—9æ¢è¥¿4ä¸ç›®",
        hours: "å…¥ä½æœŸé–“",
        price: "1,500å†† / æ™š",
        capacity: "éœ€é ç´„",
        map: "VESSEL INN SAPPORO NAKAJIMA PARK"
      }
    ]
  },

  tokyo: {
    name: "æ±äº¬",
    parkings: [
      {
        name: "æ±äº¬ç«™å…«é‡æ´²åœ°ä¸‹åœè»Šå ´",
        tag: "å¸‚å€åœè»Šå ´",
        address: "æ±äº¬éƒ½åƒä»£ç”°å€ä¸¸ä¹‹å…§",
        hours: "24 å°æ™‚",
        price: "400å†† / 30åˆ†é˜",
        capacity: "300 å°",
        map: "æ±äº¬é§…"
      }
    ]
  }
};

/* ======================
   åˆå§‹åŒ–
====================== */
const citySelect = document.getElementById("citySelect");
const parkingList = document.getElementById("parkingList");
const hint = document.getElementById("hint");

function init() {
  citySelect.innerHTML = Object.keys(PARKING_DATA)
    .map(k => `<option value="${k}">${PARKING_DATA[k].name}</option>`)
    .join("");

  citySelect.onchange = () => render(citySelect.value);

  autoSelectFromItinerary();
}

/* ======================
   è¡Œç¨‹ â†’ åœè»Šå ´é—œè¯
====================== */
function autoSelectFromItinerary() {
  const itinerary = JSON.parse(localStorage.getItem("todayItinerary"));
  if (itinerary?.city && PARKING_DATA[itinerary.city]) {
    citySelect.value = itinerary.city;
    hint.textContent = "ğŸ“ æ ¹æ“šä»Šæ—¥è¡Œç¨‹è‡ªå‹•æ¨è–¦åœè»Šå ´";
  }
  render(citySelect.value);
}

/* ======================
   æ¸²æŸ“åœè»Šå ´
====================== */
function render(cityKey) {
  const city = PARKING_DATA[cityKey];
  parkingList.innerHTML = city.parkings.map(p => `
    <div class="card">
      <span class="tag">${p.tag}</span>
      <h2>${p.name}</h2>

      <div class="meta">ğŸ“ ${p.address}</div>
      <div class="meta">â° ${p.hours}</div>
      <div class="meta">ğŸ’° ${p.price}</div>
      <div class="meta">ğŸš— è»Šä½ï¼š${p.capacity}</div>

      <iframe
        class="map"
        loading="lazy"
        src="https://www.google.com/maps?q=${encodeURIComponent(p.map)}&output=embed">
      </iframe>
    </div>
  `).join("");
}

init();
</script>

</body>
</html>
